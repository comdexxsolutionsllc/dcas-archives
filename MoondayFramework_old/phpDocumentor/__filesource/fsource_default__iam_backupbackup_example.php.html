<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos -->
			<title>File Source for backup_example.php</title>
			<link rel="stylesheet" href="../media/stylesheet.css" />
			<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'/>
		</head>
		<body>
						<h1>Source for file backup_example.php</h1>
<p>Documentation is available at <a href="../default/_iam_backup_backup_example_php.html">backup_example.php</a></p>
<div class="src-code">
<pre><ol><li><a name="a1"></a><span class="src-php">&lt;?php</span></li>
<li><a name="a4"></a><span class="src-comm">// Example Backup</span></li>
<li><a name="a5"></a><span class="src-comm">#####################################################################################################################</span></li>
<li><a name="a6"></a>  <span class="src-comm">#                      Include the class                                                                            #</span></li>
<li><a name="a7"></a>  <span class="src-comm">#####################################################################################################################</span></li>
<li><a name="a7"></a>  </li>
<li><a name="a8"></a>  <span class="src-inc">require_once</span><span class="src-sym">(</span><span class="src-str">&quot;iam_backup.php&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a9"></a>&nbsp;</li>
<li><a name="a10"></a>&nbsp;</li>
<li><a name="a11"></a>&nbsp;</li>
<li><a name="a12"></a>  <span class="src-comm">#####################################################################################################################</span></li>
<li><a name="a13"></a><span class="src-comm">#  Set the parameters: hostname, databasename, dbuser and password(must have SELECT permission to the mysql DB)     #</span></li>
<li><a name="a14"></a>  <span class="src-comm">#  Note that this produces a GZip compressed file. You should set the $compress parameter to false to get SQL file  #</span></li>
<li><a name="a15"></a>  <span class="src-comm">#  This will dump the database and prompt the user to download it. No compression is applied here.                  #</span></li>
<li><a name="a16"></a>  <span class="src-comm">#####################################################################################################################</span></li>
<li><a name="a16"></a>  </li>
<li><a name="a17"></a>  <span class="src-var">$backup </span>= <span class="src-key">new </span><span class="src-id"><a href="../iam_backup.php/iam_backup.html">iam_backup</a></span><span class="src-sym">(</span><span class="src-str">&quot;localhost&quot;</span><span class="src-sym">, </span><span class="src-str">&quot;mysql&quot;</span><span class="src-sym">, </span><span class="src-str">&quot;root&quot;</span><span class="src-sym">, </span><span class="src-str">&quot;&quot;</span><span class="src-sym">, </span><span class="src-id">true</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a18"></a>&nbsp;</li>
<li><a name="a19"></a>  <span class="src-comm">#####################################################################################################################</span></li>
<li><a name="a20"></a><span class="src-comm">#  Call the perform backup function  and that's it!!!                                                               #</span></li>
<li><a name="a21"></a>  <span class="src-comm">#####################################################################################################################</span></li>
<li><a name="a21"></a>  </li>
<li><a name="a22"></a>  <span class="src-var">$backup</span><span class="src-sym">-&gt;</span><span class="src-id">perform_backup</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a23"></a>&nbsp;</li>
<li><a name="a24"></a>  <span class="src-comm">#####################################################################################################################</span></li>
<li><a name="a25"></a><span class="src-comm">#  Set the parameters: We only set the Database connection. The connection procedure could be in an include file    #                                                     #</span></li>
<li><a name="a26"></a>  <span class="src-comm">#  This will dump the database and prompt the user to download it. No compression is applied here.                  #</span></li>
<li><a name="a27"></a>  <span class="src-comm">#####################################################################################################################</span></li>
<li><a name="a28"></a>&nbsp;</li>
<li><a name="a27"></a>  </li>
<li><a name="a28"></a>&nbsp;</li>
<li><a name="a29"></a>  <span class="src-var">$conn </span>= <span class="src-sym">@</span><span class="src-id">mysql_pconnect</span><span class="src-sym">(</span><span class="src-str">&quot;localhost&quot;</span><span class="src-sym">,</span><span class="src-str">&quot;root&quot;</span><span class="src-sym">,</span><span class="src-str">&quot;&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a30"></a>  <span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-var">$result</span><span class="src-sym">)     </span><span class="src-comm">// If no connection, return 0</span></li>
<li><a name="a31"></a>  <span class="src-sym">{</span></li>
<li><a name="a32"></a>    echo <span class="src-str">&quot;An error has occured. Could not connect to the server&quot;</span><span class="src-sym">;</span></li>
<li><a name="a33"></a>  <span class="src-sym">}</span></li>
<li><a name="a34"></a>  <span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-sym">@</span><span class="src-id">mysql_select_db</span><span class="src-sym">(</span><span class="src-str">&quot;mysql&quot;</span><span class="src-sym">))  </span><span class="src-comm">// If db not set, return 0</span></li>
<li><a name="a35"></a>  <span class="src-sym">{</span></li>
<li><a name="a36"></a>    echo <span class="src-str">&quot;An error has occured. Could not select the MySQL Database&quot;</span><span class="src-sym">;</span></li>
<li><a name="a37"></a>  <span class="src-sym">}</span></li>
<li><a name="a38"></a>&nbsp;</li>
<li><a name="a39"></a>  <span class="src-var">$backup </span>= <span class="src-key">new </span><span class="src-id"><a href="../iam_backup.php/iam_backup.html">iam_backup</a></span><span class="src-sym">(</span><span class="src-var">$conn</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a40"></a>&nbsp;</li>
<li><a name="a41"></a>  <span class="src-comm">#####################################################################################################################</span></li>
<li><a name="a42"></a><span class="src-comm">#  Call the perform backup function  and that's it!!!                                                               #</span></li>
<li><a name="a43"></a>  <span class="src-comm">#####################################################################################################################</span></li>
<li><a name="a43"></a>  </li>
<li><a name="a44"></a>  <span class="src-var">$backup</span><span class="src-sym">-&gt;</span><span class="src-id">perform_backup</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a45"></a>&nbsp;</li>
<li><a name="a46"></a>  <span class="src-comm">#####################################################################################################################</span></li>
<li><a name="a47"></a><span class="src-comm">#  Set the parameters: hostname, databasename, dbuser and password(must have SELECT permission to the mysql DB)     #</span></li>
<li><a name="a48"></a>  <span class="src-comm">#  Note that this produces a GZip compressed file. You should set the third parameter to false to get an SQL file   #</span></li>
<li><a name="a49"></a>  <span class="src-comm">#  This will dump the database into the file located in &quot;./file.sql.gz&quot;                                             #</span></li>
<li><a name="a50"></a>  <span class="src-comm">#####################################################################################################################</span></li>
<li><a name="a50"></a>  </li>
<li><a name="a51"></a>  <span class="src-var">$backup </span>= <span class="src-key">new </span><span class="src-id"><a href="../iam_backup.php/iam_backup.html">iam_backup</a></span><span class="src-sym">(</span><span class="src-str">&quot;localhost&quot;</span><span class="src-sym">, </span><span class="src-str">&quot;mysql&quot;</span><span class="src-sym">, </span><span class="src-str">&quot;root&quot;</span><span class="src-sym">, </span><span class="src-str">&quot;&quot;</span><span class="src-sym">, </span><span class="src-id">true</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">, </span><span class="src-id">true</span><span class="src-sym">, </span><span class="src-str">&quot;./file.sql.gz&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a52"></a>&nbsp;</li>
<li><a name="a53"></a>  <span class="src-comm">#####################################################################################################################</span></li>
<li><a name="a54"></a><span class="src-comm">#  Call the perform backup function  and that's it!!!                                                               #</span></li>
<li><a name="a55"></a>  <span class="src-comm">#####################################################################################################################</span></li>
<li><a name="a55"></a>  </li>
<li><a name="a56"></a>  <span class="src-var">$backup</span><span class="src-sym">-&gt;</span><span class="src-id">perform_backup</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a57"></a>&nbsp;</li>
<li><a name="a58"></a><span class="src-php">?&gt;</span></li>
</ol></pre>
</div>
	<p class="notes" id="credit">
		Documentation generated on Mon, 19 Jul 2010 20:31:10 -0500 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.3.0RC3</a>
	</p>
	</body>
</html>