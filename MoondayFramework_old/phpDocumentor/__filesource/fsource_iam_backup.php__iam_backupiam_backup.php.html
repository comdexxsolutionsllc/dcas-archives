<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos -->
			<title>File Source for iam_backup.php</title>
			<link rel="stylesheet" href="../media/stylesheet.css" />
			<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'/>
		</head>
		<body>
						<h1>Source for file iam_backup.php</h1>
<p>Documentation is available at <a href="../iam_backup.php/_iam_backup_iam_backup_php.html">iam_backup.php</a></p>
<div class="src-code">
<pre><ol><li><a name="a1"></a><span class="src-php">&lt;?php</span></li>
<li><a name="a2"></a>&nbsp;</li>
<li><a name="a3"></a><span class="src-doc">/**</span></li>
<li><a name="a4"></a><span class="src-doc">* </span><span class="src-doc-coretag">@package</span><span class="src-doc"> iam_backup.php</span></li>
<li><a name="a5"></a><span class="src-doc">* </span><span class="src-doc-coretag">@author</span><span class="src-doc"> Joshua Abbott, WiseGene Project (NKommunikation)</span></li>
<li><a name="a6"></a><span class="src-doc">* </span><span class="src-doc-coretag">@copyright</span><span class="src-doc"> (C) 2006 NKommunikation. All Rights Reserved.</span></li>
<li><a name="a7"></a><span class="src-doc">* </span><span class="src-doc-tag">@desc</span><span class="src-doc"> Backup a database: Send to browser or archive</span></li>
<li><a name="a8"></a><span class="src-doc">* </span><span class="src-doc-coretag">@uses</span></li>
<li><a name="a9"></a><span class="src-doc">* </span><span class="src-doc-coretag">@example</span></li>
<li><a name="a10"></a><span class="src-doc">* </span><span class="src-doc-tag">@files</span></li>
<li><a name="a11"></a><span class="src-doc">*/</span></li>
<li><a name="a12"></a>&nbsp;</li>
<li><a name="a13"></a><span class="src-key">class </span><a href="../iam_backup.php/iam_backup.html">iam_backup</a></li>
<li><a name="a14"></a><span class="src-sym">{</span></li>
<li><a name="a15"></a><span class="src-doc">/**</span></li>
<li><a name="a16"></a><span class="src-doc">*</span></li>
<li><a name="a17"></a><span class="src-doc">* </span><span class="src-doc-coretag">@var </span><span class="src-doc-type">string </span><span class="src-doc-var">$host </span><span class="src-doc">Host that holds the DB</span></li>
<li><a name="a18"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> private</span></li>
<li><a name="a19"></a><span class="src-doc">*/</span></li>
<li><a name="a20"></a>    <span class="src-key">var </span><span class="src-var">$host</span>=<span class="src-str">&quot;localhost&quot;</span><span class="src-sym">;</span></li>
<li><a name="a21"></a>&nbsp;</li>
<li><a name="a22"></a><span class="src-doc">/**</span></li>
<li><a name="a23"></a><span class="src-doc">*</span></li>
<li><a name="a24"></a><span class="src-doc">* </span><span class="src-doc-coretag">@var </span><span class="src-doc-type">string </span><span class="src-doc-var">$dbname </span><span class="src-doc">Database to back up</span></li>
<li><a name="a25"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> private</span></li>
<li><a name="a26"></a><span class="src-doc">*/</span></li>
<li><a name="a27"></a>    <span class="src-key">var </span><span class="src-var">$dbname</span>=<span class="src-str">&quot;mysql&quot;</span><span class="src-sym">;</span></li>
<li><a name="a28"></a>&nbsp;</li>
<li><a name="a29"></a><span class="src-doc">/**</span></li>
<li><a name="a30"></a><span class="src-doc">*</span></li>
<li><a name="a31"></a><span class="src-doc">* </span><span class="src-doc-coretag">@var </span><span class="src-doc-type">string </span><span class="src-doc-var">$dbuser </span><span class="src-doc">User to access the Database</span></li>
<li><a name="a32"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> private</span></li>
<li><a name="a33"></a><span class="src-doc">*/</span></li>
<li><a name="a34"></a>    <span class="src-key">var </span><span class="src-var">$dbuser</span>=<span class="src-str">&quot;root&quot;</span><span class="src-sym">;</span></li>
<li><a name="a35"></a>&nbsp;</li>
<li><a name="a36"></a><span class="src-doc">/**</span></li>
<li><a name="a37"></a><span class="src-doc">*</span></li>
<li><a name="a38"></a><span class="src-doc">* </span><span class="src-doc-coretag">@var </span><span class="src-doc-type">string </span><span class="src-doc-var">$dbpass </span><span class="src-doc">Password to access the Database</span></li>
<li><a name="a39"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> private</span></li>
<li><a name="a40"></a><span class="src-doc">*/</span></li>
<li><a name="a41"></a>    <span class="src-key">var </span><span class="src-var">$dbpass</span>=<span class="src-str">&quot;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a42"></a>&nbsp;</li>
<li><a name="a43"></a><span class="src-doc">/**</span></li>
<li><a name="a44"></a><span class="src-doc">*</span></li>
<li><a name="a45"></a><span class="src-doc">* </span><span class="src-doc-coretag">@var </span><span class="src-doc-type">string </span><span class="src-doc-var">$newline </span><span class="src-doc">Newline character (OS dependant)</span></li>
<li><a name="a46"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> private</span></li>
<li><a name="a47"></a><span class="src-doc">*/</span></li>
<li><a name="a48"></a>    <span class="src-key">var </span><span class="src-var">$newline</span><span class="src-sym">;</span></li>
<li><a name="a49"></a>&nbsp;</li>
<li><a name="a50"></a><span class="src-doc">/**</span></li>
<li><a name="a51"></a><span class="src-doc">*</span></li>
<li><a name="a52"></a><span class="src-doc">* </span><span class="src-doc-coretag">@var </span><span class="src-doc-type">Boolean </span><span class="src-doc-var">$struct_only </span><span class="src-doc">Indicates whether the backup will contain only the DB structure and no data (when true)</span></li>
<li><a name="a53"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> private</span></li>
<li><a name="a54"></a><span class="src-doc">*/</span></li>
<li><a name="a55"></a>    <span class="src-key">var </span><span class="src-var">$struct_only </span>= <span class="src-id">false</span><span class="src-sym">;</span></li>
<li><a name="a56"></a>&nbsp;</li>
<li><a name="a57"></a><span class="src-doc">/**</span></li>
<li><a name="a58"></a><span class="src-doc">*</span></li>
<li><a name="a59"></a><span class="src-doc">* </span><span class="src-doc-coretag">@var </span><span class="src-doc-type">string </span><span class="src-doc-var">$output </span><span class="src-doc">Whether to send the output to the browser (when false)or download it as a file (when true)</span></li>
<li><a name="a60"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> private</span></li>
<li><a name="a61"></a><span class="src-doc">*/</span></li>
<li><a name="a62"></a>    <span class="src-key">var </span><span class="src-var">$output </span>= <span class="src-id">true</span><span class="src-sym">;</span></li>
<li><a name="a63"></a>&nbsp;</li>
<li><a name="a64"></a><span class="src-doc">/**</span></li>
<li><a name="a65"></a><span class="src-doc">*</span></li>
<li><a name="a66"></a><span class="src-doc">* </span><span class="src-doc-coretag">@var </span><span class="src-doc-type">string </span><span class="src-doc-var">$compress </span><span class="src-doc">Indicates whether the dump will be compressed (using GZIP compression). It only has an effect when downloading the file.</span></li>
<li><a name="a67"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> private</span></li>
<li><a name="a68"></a><span class="src-doc">*/</span></li>
<li><a name="a69"></a>    <span class="src-key">var </span><span class="src-var">$compress </span>= <span class="src-id">true</span><span class="src-sym">;</span></li>
<li><a name="a70"></a>&nbsp;</li>
<li><a name="a71"></a><span class="src-doc">/**</span></li>
<li><a name="a72"></a><span class="src-doc">*</span></li>
<li><a name="a73"></a><span class="src-doc">* </span><span class="src-doc-coretag">@var </span><span class="src-doc-type">string </span><span class="src-doc-var">$filename </span><span class="src-doc">Indicates Path and name of the file (when the dump is done on the server). If not null, the dump will be performed on the local server. If null, the file will be sent to the browser.</span></li>
<li><a name="a74"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> private</span></li>
<li><a name="a75"></a><span class="src-doc">*/</span></li>
<li><a name="a76"></a>    <span class="src-key">var </span><span class="src-var">$filename </span>= <span class="src-str">&quot;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a77"></a>&nbsp;</li>
<li><a name="a78"></a><span class="src-doc">/**</span></li>
<li><a name="a79"></a><span class="src-doc">* Initialize this class. Constructor</span></li>
<li><a name="a80"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> public</span></li>
<li><a name="a81"></a><span class="src-doc">* </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">Mixed </span><span class="src-doc-var">$host </span><span class="src-doc">Host that holds the DB. The user of the class can pass it either a Hostaname (and fill in the rest of the data) or a Connection Object (and avoid filling in all the parameters). Thanks Sebastiaan van Stijn</span></li>
<li><a name="a82"></a><span class="src-doc">* </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">String </span><span class="src-doc-var">$dbanme </span><span class="src-doc">Database to back up</span></li>
<li><a name="a83"></a><span class="src-doc">* </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">String </span><span class="src-doc-var">$dbuser </span><span class="src-doc">User to access the Database</span></li>
<li><a name="a84"></a><span class="src-doc">* </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">String </span><span class="src-doc-var">$dbpass </span><span class="src-doc">Password to access the Database</span></li>
<li><a name="a85"></a><span class="src-doc">* </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">Boolean </span><span class="src-doc-var">$output </span><span class="src-doc">Whether to send the output to the browser (when false)or download it as a file (when true)</span></li>
<li><a name="a86"></a><span class="src-doc">* </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">Boolean </span><span class="src-doc-var">$struct_only </span><span class="src-doc">Indicates whether the backup will contain only the DB structure and no data (when true)</span></li>
<li><a name="a87"></a><span class="src-doc">* </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">Boolean </span><span class="src-doc-var">$compress </span><span class="src-doc">Indicates whether the dump will be compressed (using GZIP compression). It only has an effect when downloading the file.</span></li>
<li><a name="a88"></a><span class="src-doc">* </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">String </span><span class="src-doc-var">$filename </span><span class="src-doc">Indicates Path and name of the file (when the dump is done on the server)</span></li>
<li><a name="a89"></a><span class="src-doc">*/</span></li>
<li><a name="a90"></a>    <span class="src-key">function </span><a href="../iam_backup.php/iam_backup.html#methodiam_backup">iam_backup</a><span class="src-sym">(</span><span class="src-var">$host </span>= <span class="src-str">'localhost'</span><span class="src-sym">, </span><span class="src-var">$dbname </span>= <span class="src-str">'mysql'</span><span class="src-sym">, </span><span class="src-var">$dbuser </span>= <span class="src-str">'root'</span><span class="src-sym">, </span><span class="src-var">$dbpass </span>= <span class="src-str">''</span><span class="src-sym">, </span><span class="src-var">$struct_only </span>= <span class="src-id">false</span><span class="src-sym">, </span><span class="src-var">$output </span>= <span class="src-id">true</span><span class="src-sym">, </span><span class="src-var">$compress </span>= <span class="src-id">true</span><span class="src-sym">, </span><span class="src-var">$filename</span>=<span class="src-str">&quot;&quot;</span><span class="src-sym">)</span></li>
<li><a name="a91"></a>    <span class="src-sym">{</span></li>
<li><a name="a92"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">output       </span>= <span class="src-var">$output</span><span class="src-sym">;</span></li>
<li><a name="a93"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">struct_only  </span>= <span class="src-var">$struct_only</span><span class="src-sym">;</span></li>
<li><a name="a94"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">compress     </span>= <span class="src-var">$compress</span><span class="src-sym">;</span></li>
<li><a name="a95"></a>&nbsp;</li>
<li><a name="a96"></a>        <span class="src-comm">/*</span></li>
<li><a name="a97"></a><span class="src-comm">        * check if 'host' contains a connection instead of a hostname</span></li>
<li><a name="a98"></a><span class="src-comm">        * Check takes place on two properties;</span></li>
<li><a name="a99"></a><span class="src-comm">        * 1) check if 'host' is an object</span></li>
<li><a name="a100"></a><span class="src-comm">        * 2) check if 'host' has a property called 'database' (any other connection-specific property should do)</span></li>
<li><a name="a101"></a><span class="src-comm">        */</span></li>
<li><a name="a102"></a>        <span class="src-key">if</span><span class="src-sym">(</span><a href="http://www.php.net/is_object">is_object</a><span class="src-sym">(</span><span class="src-var">$host</span><span class="src-sym">) </span>&amp;&amp; isset<span class="src-sym">(</span><span class="src-var">$host</span><span class="src-sym">-&gt;</span><span class="src-id">database</span><span class="src-sym">))</span><span class="src-sym">{</span></li>
<li><a name="a103"></a>            <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">host     </span>= <span class="src-var">$host</span><span class="src-sym">-&gt;</span><span class="src-id">host</span><span class="src-sym">;</span></li>
<li><a name="a104"></a>            <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">dbname     </span>= <span class="src-var">$host</span><span class="src-sym">-&gt;</span><span class="src-id">database</span><span class="src-sym">;</span></li>
<li><a name="a105"></a>            <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">dbuser     </span>= <span class="src-var">$host</span><span class="src-sym">-&gt;</span><span class="src-id">user</span><span class="src-sym">;</span></li>
<li><a name="a106"></a>            <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">dbpass     </span>= <span class="src-var">$host</span><span class="src-sym">-&gt;</span><span class="src-id">password</span><span class="src-sym">;</span></li>
<li><a name="a107"></a>        <span class="src-sym">}</span><span class="src-key">else</span><span class="src-sym">{</span></li>
<li><a name="a108"></a>            <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">host     </span>= <span class="src-var">$host</span><span class="src-sym">;</span></li>
<li><a name="a109"></a>            <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">dbname     </span>= <span class="src-var">$dbname</span><span class="src-sym">;</span></li>
<li><a name="a110"></a>            <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">dbuser     </span>= <span class="src-var">$dbuser</span><span class="src-sym">;</span></li>
<li><a name="a111"></a>            <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">dbpass     </span>= <span class="src-var">$dbpass</span><span class="src-sym">;</span></li>
<li><a name="a112"></a>        <span class="src-sym">}</span></li>
<li><a name="a113"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">filename    </span>= <span class="src-var">$filename</span><span class="src-sym">;</span></li>
<li><a name="a114"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">newline     </span>= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-id">_define_newline</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a115"></a>    <span class="src-sym">}</span></li>
<li><a name="a116"></a>&nbsp;</li>
<li><a name="a117"></a><span class="src-doc">/**</span></li>
<li><a name="a118"></a><span class="src-doc">* Generate the DB Dump.</span></li>
<li><a name="a119"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> private</span></li>
<li><a name="a120"></a><span class="src-doc">*/</span></li>
<li><a name="a121"></a>    <span class="src-key">function </span><span class="src-id">_backup</span><span class="src-sym">(</span><span class="src-sym">)</span></li>
<li><a name="a122"></a>    <span class="src-sym">{</span></li>
<li><a name="a123"></a>        <span class="src-var">$now </span>= <a href="http://www.php.net/gmdate">gmdate</a><span class="src-sym">(</span><span class="src-str">'D, d M Y H:i:s'</span><span class="src-sym">) </span>. <span class="src-str">' GMT'</span><span class="src-sym">;</span></li>
<li><a name="a124"></a>&nbsp;</li>
<li><a name="a125"></a>        <span class="src-var">$newfile</span>.= <span class="src-str">&quot;#------------------------------------------&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">newline</span><span class="src-sym">;</span></li>
<li><a name="a126"></a>        <span class="src-var">$newfile</span>.= <span class="src-str">&quot;# Database Backup Class by Iv�n Melgrati&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">newline</span><span class="src-sym">;</span></li>
<li><a name="a127"></a>        <span class="src-var">$newfile</span>.= <span class="src-str">&quot;</span><span class="src-str"># <span class="src-id">Database</span>: <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">dbname</span><span class="src-str">"</span></span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">newline</span><span class="src-sym">;</span></li>
<li><a name="a128"></a>        <span class="src-var">$newfile</span>.= <span class="src-str">&quot;</span><span class="src-str"># <span class="src-id">Date</span>: <span class="src-var">$now</span></span><span class="src-str">&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">newline</span><span class="src-sym">;</span></li>
<li><a name="a129"></a>        <span class="src-var">$newfile</span>.= <span class="src-str">&quot;#------------------------------------------&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">newline</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">newline</span><span class="src-sym">;</span></li>
<li><a name="a130"></a>&nbsp;</li>
<li><a name="a131"></a>        <span class="src-var">$result </span>= <span class="src-id">mysql_pconnect</span><span class="src-sym">(</span><span class="src-str">&quot;</span><span class="src-str"><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">host</span><span class="src-str">"</span></span><span class="src-sym">,</span><span class="src-str">&quot;</span><span class="src-str"><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">dbuser</span><span class="src-str">"</span></span><span class="src-sym">,</span><span class="src-str">&quot;</span><span class="src-str"><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">dbpass</span><span class="src-str">"</span></span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a132"></a>        <span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-var">$result</span><span class="src-sym">)     </span><span class="src-comm">// If no connection can be obtained, return empty string</span></li>
<li><a name="a133"></a>        <span class="src-sym">{</span></li>
<li><a name="a134"></a>        <span class="src-key">return </span><span class="src-str">&quot;</span><span class="src-str"><span class="src-id">Error</span>. <span class="src-id">Can�t</span> <span class="src-id">connect</span> <span class="src-id">to</span> <span class="src-id">Database</span>: <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">dbname</span><span class="src-str">"</span></span><span class="src-sym">;</span></li>
<li><a name="a135"></a>        <span class="src-sym">}</span></li>
<li><a name="a136"></a>&nbsp;</li>
<li><a name="a137"></a>        <span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-id">mysql_select_db</span><span class="src-sym">(</span><span class="src-str">&quot;</span><span class="src-str"><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">dbname</span><span class="src-str">"</span></span><span class="src-sym">))  </span><span class="src-comm">// If db can't be set, return empty string</span></li>
<li><a name="a138"></a>        <span class="src-sym">{</span></li>
<li><a name="a139"></a>        <span class="src-key">return </span><span class="src-str">&quot;</span><span class="src-str"><span class="src-id">Error</span>. <span class="src-id">Database</span> <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">dbname</span> <span class="src-id">could</span> <span class="src-id">not</span> <span class="src-id">be</span> <span class="src-id">selected</span>.</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a140"></a>        <span class="src-sym">}</span></li>
<li><a name="a141"></a>&nbsp;</li>
<li><a name="a142"></a>        <span class="src-var">$result </span>= <span class="src-id">mysql_query</span><span class="src-sym">(</span><span class="src-str">&quot;</span><span class="src-str"><span class="src-id">show</span> <span class="src-id">tables</span> <span class="src-id">from</span> `<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">dbname</span>`</span><span class="src-str">&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a143"></a>        <span class="src-key">while </span><span class="src-sym">(</span>list<span class="src-sym">(</span><span class="src-var">$table</span><span class="src-sym">) </span>= <span class="src-sym">@</span><span class="src-id">mysql_fetch_row</span><span class="src-sym">(</span><span class="src-var">$result</span><span class="src-sym">))</span></li>
<li><a name="a144"></a>        <span class="src-sym">{</span></li>
<li><a name="a145"></a>        <span class="src-var">$newfile </span>.= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-id">_get_def</span><span class="src-sym">(</span><span class="src-var">$table</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a146"></a>        <span class="src-var">$newfile </span>.= <span class="src-str">&quot;</span><span class="src-str"><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">newline</span><span class="src-str">"</span></span><span class="src-sym">;</span></li>
<li><a name="a147"></a>        <span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-var">$struct_only</span><span class="src-sym">) </span><span class="src-comm">// If table data also has to be written, get table contents</span></li>
<li><a name="a148"></a>            <span class="src-var">$newfile </span>.= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-id">_get_content</span><span class="src-sym">(</span><span class="src-var">$table</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a149"></a>        <span class="src-var">$newfile </span>.= <span class="src-str">&quot;</span><span class="src-str"><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">newline</span><span class="src-str">"</span></span><span class="src-sym">;</span></li>
<li><a name="a150"></a>        <span class="src-var">$i</span>++<span class="src-sym">;</span></li>
<li><a name="a151"></a>        <span class="src-sym">}</span></li>
<li><a name="a152"></a>&nbsp;</li>
<li><a name="a153"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-id">_out</span><span class="src-sym">(</span><span class="src-var">$newfile</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a154"></a>    <span class="src-sym">}</span></li>
<li><a name="a155"></a>&nbsp;</li>
<li><a name="a156"></a><span class="src-doc">/**</span></li>
<li><a name="a157"></a><span class="src-doc">* Send the output to the browser</span></li>
<li><a name="a158"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> private</span></li>
<li><a name="a159"></a><span class="src-doc">* </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">string </span><span class="src-doc-var">$output </span><span class="src-doc">Contains the database dump</span></li>
<li><a name="a160"></a><span class="src-doc">*/</span></li>
<li><a name="a161"></a>    <span class="src-key">function </span><span class="src-id">_out</span><span class="src-sym">(</span><span class="src-var">$dump</span><span class="src-sym">)</span></li>
<li><a name="a162"></a>    <span class="src-sym">{</span></li>
<li><a name="a163"></a>        <span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">filename</span><span class="src-sym">)</span></li>
<li><a name="a164"></a>        <span class="src-sym">{</span></li>
<li><a name="a165"></a>            <span class="src-var">$fptr</span>= <a href="http://www.php.net/fopen">fopen</a><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">filename</span><span class="src-sym">, </span><span class="src-str">&quot;wb&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a166"></a>            <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$fptr</span><span class="src-sym">)</span></li>
<li><a name="a167"></a>            <span class="src-sym">{</span></li>
<li><a name="a168"></a>                <span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">compress</span><span class="src-sym">)</span></li>
<li><a name="a169"></a>                <span class="src-sym">{</span></li>
<li><a name="a170"></a>                   <span class="src-var">$gzbackupData </span>= <span class="src-str">&quot;\x1f\x8b\x08\x00\x00\x00\x00\x00&quot;</span>.<a href="http://www.php.net/substr">substr</a><span class="src-sym">(</span><a href="http://www.php.net/gzcompress">gzcompress</a><span class="src-sym">(</span><span class="src-var">$dump</span><span class="src-sym">,</span><span class="src-num">9</span><span class="src-sym">)</span><span class="src-sym">,</span><span class="src-num">0</span><span class="src-sym">,</span>-<span class="src-num">4</span><span class="src-sym">)</span>.<a href="http://www.php.net/pack">pack</a><span class="src-sym">(</span><span class="src-str">'V'</span><span class="src-sym">,</span><a href="http://www.php.net/crc32">crc32</a><span class="src-sym">(</span><span class="src-var">$dump</span><span class="src-sym">))</span>.<a href="http://www.php.net/pack">pack</a><span class="src-sym">(</span><span class="src-str">'V'</span><span class="src-sym">,</span><a href="http://www.php.net/strlen">strlen</a><span class="src-sym">(</span><span class="src-var">$dump</span><span class="src-sym">))</span><span class="src-sym">;</span></li>
<li><a name="a171"></a>                   <a href="http://www.php.net/fwrite">fwrite</a><span class="src-sym">(</span><span class="src-var">$fptr</span><span class="src-sym">, </span><span class="src-var">$gzbackupData</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a172"></a>                <span class="src-sym">}</span></li>
<li><a name="a173"></a>                <span class="src-key">else</span></li>
<li><a name="a174"></a>                   <a href="http://www.php.net/fwrite">fwrite</a><span class="src-sym">(</span><span class="src-var">$fptr</span><span class="src-sym">, </span><span class="src-var">$dump</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a175"></a>                <a href="http://www.php.net/fclose">fclose</a><span class="src-sym">(</span><span class="src-var">$fptr</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a176"></a>            <span class="src-sym">}</span></li>
<li><a name="a177"></a>        <span class="src-sym">}</span></li>
<li><a name="a178"></a>        <span class="src-key">else</span></li>
<li><a name="a179"></a>        <span class="src-sym">{</span></li>
<li><a name="a180"></a>            <span class="src-key">if</span><span class="src-sym">((</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">compress</span><span class="src-sym">) </span><span class="src-key">and </span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">output</span><span class="src-sym">))</span></li>
<li><a name="a181"></a>            <span class="src-sym">{</span></li>
<li><a name="a182"></a>               <span class="src-var">$gzbackupData </span>= <span class="src-str">&quot;\x1f\x8b\x08\x00\x00\x00\x00\x00&quot;</span>.<a href="http://www.php.net/substr">substr</a><span class="src-sym">(</span><a href="http://www.php.net/gzcompress">gzcompress</a><span class="src-sym">(</span><span class="src-var">$dump</span><span class="src-sym">,</span><span class="src-num">9</span><span class="src-sym">)</span><span class="src-sym">,</span><span class="src-num">0</span><span class="src-sym">,</span>-<span class="src-num">4</span><span class="src-sym">)</span>.<a href="http://www.php.net/pack">pack</a><span class="src-sym">(</span><span class="src-str">'V'</span><span class="src-sym">,</span><a href="http://www.php.net/crc32">crc32</a><span class="src-sym">(</span><span class="src-var">$dump</span><span class="src-sym">))</span>.<a href="http://www.php.net/pack">pack</a><span class="src-sym">(</span><span class="src-str">'V'</span><span class="src-sym">,</span><a href="http://www.php.net/strlen">strlen</a><span class="src-sym">(</span><span class="src-var">$dump</span><span class="src-sym">))</span><span class="src-sym">;</span></li>
<li><a name="a183"></a>               echo <span class="src-var">$gzbackupData</span><span class="src-sym">;</span></li>
<li><a name="a184"></a>            <span class="src-sym">}</span></li>
<li><a name="a185"></a>            <span class="src-key">else</span></li>
<li><a name="a186"></a>               echo <span class="src-var">$dump</span><span class="src-sym">;</span></li>
<li><a name="a187"></a>        <span class="src-sym">}</span></li>
<li><a name="a188"></a>    <span class="src-sym">}</span></li>
<li><a name="a189"></a>&nbsp;</li>
<li><a name="a190"></a><span class="src-doc">/**</span></li>
<li><a name="a191"></a><span class="src-doc">* Generate the selected table's definition</span></li>
<li><a name="a192"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> private</span></li>
<li><a name="a193"></a><span class="src-doc">* </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">String </span><span class="src-doc">table definition dump</span></li>
<li><a name="a194"></a><span class="src-doc">* </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">String </span><span class="src-doc-var">$tablename </span><span class="src-doc">Name of the table to back up</span></li>
<li><a name="a195"></a><span class="src-doc">*/</span></li>
<li><a name="a196"></a>    <span class="src-key">function </span><span class="src-id">_get_def</span><span class="src-sym">(</span><span class="src-var">$tablename</span><span class="src-sym">)</span></li>
<li><a name="a197"></a>    <span class="src-sym">{</span></li>
<li><a name="a198"></a>        <span class="src-var">$def </span>= <span class="src-str">&quot;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a199"></a>        <span class="src-var">$def </span>.=<span class="src-str">&quot;#------------------------------------------&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">newline</span><span class="src-sym">;</span></li>
<li><a name="a200"></a>        <span class="src-var">$def </span>.=<span class="src-str">&quot;</span><span class="src-str"># <span class="src-id">Table</span> <span class="src-id">definition</span> <span class="src-id">for</span> <span class="src-var">$tablename</span></span><span class="src-str">&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">newline</span><span class="src-sym">;</span></li>
<li><a name="a201"></a>        <span class="src-var">$def </span>.=<span class="src-str">&quot;#------------------------------------------&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">newline</span><span class="src-sym">;</span></li>
<li><a name="a202"></a>        <span class="src-var">$def </span>.= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">DROP</span> <span class="src-id">TABLE</span> <span class="src-id">IF</span> <span class="src-id">EXISTS</span> <span class="src-var">$tablename</span>;</span><span class="src-str">&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">newline</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">newline</span><span class="src-sym">;</span></li>
<li><a name="a203"></a>        <span class="src-var">$def </span>.= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">CREATE</span> <span class="src-id">TABLE</span> <span class="src-var">$tablename</span> (</span><span class="src-str">&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">newline</span><span class="src-sym">;</span></li>
<li><a name="a204"></a>        <span class="src-var">$result </span>= <span class="src-sym">@</span><span class="src-id">mysql_query</span><span class="src-sym">(</span><span class="src-str">&quot;</span><span class="src-str"><span class="src-id">SHOW</span> <span class="src-id">FIELDS</span> <span class="src-id">FROM</span> `<span class="src-var">$tablename</span>`</span><span class="src-str">&quot;</span><span class="src-sym">) </span><span class="src-key">or </span><span class="src-key">die</span><span class="src-sym">(</span><span class="src-str">&quot;</span><span class="src-str"><span class="src-id">Table</span> <span class="src-var">$tablename</span> <span class="src-id">not</span> <span class="src-id">existing</span> <span class="src-id">in</span> <span class="src-id">database</span></span><span class="src-str">&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a205"></a>        <span class="src-key">while</span><span class="src-sym">(</span><span class="src-var">$row </span>= <span class="src-sym">@</span><span class="src-id">mysql_fetch_array</span><span class="src-sym">(</span><span class="src-var">$result</span><span class="src-sym">))</span></li>
<li><a name="a206"></a>        <span class="src-sym">{</span></li>
<li><a name="a207"></a>          <span class="src-var">$def </span>.= <span class="src-str">&quot;</span><span class="src-str">    <span class="src-var">$row</span><span class="src-sym">[</span><span class="src-id">Field</span><span class="src-sym">]</span> <span class="src-var">$row</span><span class="src-sym">[</span><span class="src-id">Type</span><span class="src-sym">]</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a208"></a>          <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$row</span><span class="src-sym">[</span><span class="src-str">&quot;Default&quot;</span><span class="src-sym">] </span>!= <span class="src-str">&quot;&quot;</span><span class="src-sym">) </span><span class="src-var">$def </span>.= <span class="src-str">&quot;</span><span class="src-str"> <span class="src-id">DEFAULT</span> '<span class="src-var">$row</span><span class="src-sym">[</span><span class="src-id">Default</span><span class="src-sym">]</span>'</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a209"></a>          <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$row</span><span class="src-sym">[</span><span class="src-str">&quot;Null&quot;</span><span class="src-sym">] </span>!= <span class="src-str">&quot;YES&quot;</span><span class="src-sym">) </span><span class="src-var">$def </span>.= <span class="src-str">&quot; NOT NULL&quot;</span><span class="src-sym">;</span></li>
<li><a name="a210"></a>          <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$row</span><span class="src-sym">[</span><span class="src-id">Extra</span><span class="src-sym">] </span>!= <span class="src-str">&quot;&quot;</span><span class="src-sym">) </span><span class="src-var">$def </span>.= <span class="src-str">&quot;</span><span class="src-str"> <span class="src-var">$row</span><span class="src-sym">[</span><span class="src-id">Extra</span><span class="src-sym">]</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a211"></a>          <span class="src-var">$def </span>.= <span class="src-str">&quot;</span><span class="src-str">,<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">newline</span><span class="src-str">"</span></span><span class="src-sym">;</span></li>
<li><a name="a212"></a>        <span class="src-sym">}</span></li>
<li><a name="a213"></a>        <span class="src-var">$def </span>= <a href="http://www.php.net/ereg_replace">ereg_replace</a><span class="src-sym">(</span><span class="src-str">&quot;</span><span class="src-str">,<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">newline</span>$</span><span class="src-str">&quot;</span><span class="src-sym">,</span><span class="src-str">&quot;&quot;</span><span class="src-sym">, </span><span class="src-var">$def</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a214"></a>&nbsp;</li>
<li><a name="a215"></a>        <span class="src-var">$result </span>= <span class="src-sym">@</span><span class="src-id">mysql_query</span><span class="src-sym">(</span><span class="src-str">&quot;</span><span class="src-str"><span class="src-id">SHOW</span> <span class="src-id">KEYS</span> <span class="src-id">FROM</span> `<span class="src-var">$tablename</span>`</span><span class="src-str">&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a216"></a>        <span class="src-key">while</span><span class="src-sym">(</span><span class="src-var">$row </span>= <span class="src-sym">@</span><span class="src-id">mysql_fetch_array</span><span class="src-sym">(</span><span class="src-var">$result</span><span class="src-sym">))</span></li>
<li><a name="a217"></a>        <span class="src-sym">{</span></li>
<li><a name="a218"></a>          <span class="src-var">$kname</span>=<span class="src-var">$row</span><span class="src-sym">[</span><span class="src-id">Key_name</span><span class="src-sym">]</span><span class="src-sym">;</span></li>
<li><a name="a219"></a>          <span class="src-key">if</span><span class="src-sym">((</span><span class="src-var">$kname </span>!= <span class="src-str">&quot;PRIMARY&quot;</span><span class="src-sym">) </span>&amp;&amp; <span class="src-sym">(</span><span class="src-var">$row</span><span class="src-sym">[</span><span class="src-id">Non_unique</span><span class="src-sym">] </span>== <span class="src-num">0</span><span class="src-sym">)) </span><span class="src-var">$kname</span>=<span class="src-str">&quot;</span><span class="src-str"><span class="src-id">UNIQUE</span>|<span class="src-var">$kname</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a220"></a>          <span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$index</span><span class="src-sym">[</span><span class="src-var">$kname</span><span class="src-sym">]</span><span class="src-sym">)) </span><span class="src-var">$index</span><span class="src-sym">[</span><span class="src-var">$kname</span><span class="src-sym">] </span>= <span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a221"></a>          <span class="src-var">$index</span><span class="src-sym">[</span><span class="src-var">$kname</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-sym">] </span>= <span class="src-var">$row</span><span class="src-sym">[</span><span class="src-id">Column_name</span><span class="src-sym">]</span><span class="src-sym">;</span></li>
<li><a name="a222"></a>        <span class="src-sym">}</span></li>
<li><a name="a223"></a>&nbsp;</li>
<li><a name="a224"></a>        <span class="src-key">while</span><span class="src-sym">(</span>list<span class="src-sym">(</span><span class="src-var">$x</span><span class="src-sym">, </span><span class="src-var">$columns</span><span class="src-sym">) </span>= <span class="src-sym">@</span><a href="http://www.php.net/each">each</a><span class="src-sym">(</span><span class="src-var">$index</span><span class="src-sym">))</span></li>
<li><a name="a225"></a>        <span class="src-sym">{</span></li>
<li><a name="a226"></a>          <span class="src-var">$def </span>.= <span class="src-str">&quot;</span><span class="src-str">,<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">newline</span><span class="src-str">"</span></span><span class="src-sym">;</span></li>
<li><a name="a227"></a>          <span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$x </span>== <span class="src-str">&quot;PRIMARY&quot;</span><span class="src-sym">) </span><span class="src-var">$def </span>.= <span class="src-str">&quot;   PRIMARY KEY (&quot; </span>. <a href="http://www.php.net/implode">implode</a><span class="src-sym">(</span><span class="src-var">$columns</span><span class="src-sym">, </span><span class="src-str">&quot;, &quot;</span><span class="src-sym">) </span>. <span class="src-str">&quot;)&quot;</span><span class="src-sym">;</span></li>
<li><a name="a228"></a>          <span class="src-key">else </span><span class="src-key">if </span><span class="src-sym">(</span><a href="http://www.php.net/substr">substr</a><span class="src-sym">(</span><span class="src-var">$x</span><span class="src-sym">,</span><span class="src-num">0</span><span class="src-sym">,</span><span class="src-num">6</span><span class="src-sym">) </span>== <span class="src-str">&quot;UNIQUE&quot;</span><span class="src-sym">) </span><span class="src-var">$def </span>.= <span class="src-str">&quot;   UNIQUE &quot;</span>.<a href="http://www.php.net/substr">substr</a><span class="src-sym">(</span><span class="src-var">$x</span><span class="src-sym">,</span><span class="src-num">7</span><span class="src-sym">)</span>.<span class="src-str">&quot; (&quot; </span>. <a href="http://www.php.net/implode">implode</a><span class="src-sym">(</span><span class="src-var">$columns</span><span class="src-sym">, </span><span class="src-str">&quot;, &quot;</span><span class="src-sym">) </span>. <span class="src-str">&quot;)&quot;</span><span class="src-sym">;</span></li>
<li><a name="a229"></a>          <span class="src-key">else </span><span class="src-var">$def </span>.= <span class="src-str">&quot;</span><span class="src-str">   <span class="src-id">KEY</span> <span class="src-var">$x</span> (</span><span class="src-str">&quot; </span>. <a href="http://www.php.net/implode">implode</a><span class="src-sym">(</span><span class="src-var">$columns</span><span class="src-sym">, </span><span class="src-str">&quot;, &quot;</span><span class="src-sym">) </span>. <span class="src-str">&quot;)&quot;</span><span class="src-sym">;</span></li>
<li><a name="a230"></a>        <span class="src-sym">}</span></li>
<li><a name="a231"></a>        <span class="src-var">$def </span>.= <span class="src-str">&quot;</span><span class="src-str"><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">newline</span>);</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a232"></a>&nbsp;</li>
<li><a name="a233"></a>        <span class="src-key">return </span><span class="src-sym">(</span><a href="http://www.php.net/stripslashes">stripslashes</a><span class="src-sym">(</span><span class="src-var">$def</span><span class="src-sym">))</span><span class="src-sym">;</span></li>
<li><a name="a234"></a>    <span class="src-sym">}</span></li>
<li><a name="a235"></a>&nbsp;</li>
<li><a name="a236"></a><span class="src-doc">/**</span></li>
<li><a name="a237"></a><span class="src-doc">* Generate the selected table's contents</span></li>
<li><a name="a238"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> private</span></li>
<li><a name="a239"></a><span class="src-doc">* </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">String </span><span class="src-doc">table data as INSERT statements</span></li>
<li><a name="a240"></a><span class="src-doc">* </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">String </span><span class="src-doc-var">$tablename </span><span class="src-doc">Name of the table to back up</span></li>
<li><a name="a241"></a><span class="src-doc">*/</span></li>
<li><a name="a242"></a>    <span class="src-key">function </span><span class="src-id">_get_content</span><span class="src-sym">(</span><span class="src-var">$tablename</span><span class="src-sym">)</span></li>
<li><a name="a243"></a>    <span class="src-sym">{</span></li>
<li><a name="a244"></a>        <span class="src-var">$content </span>= <span class="src-str">&quot;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a245"></a>&nbsp;</li>
<li><a name="a246"></a>        <span class="src-var">$result </span>= <span class="src-sym">@</span><span class="src-id">mysql_query</span><span class="src-sym">(</span><span class="src-str">&quot;</span><span class="src-str"><span class="src-id">SELECT</span> * <span class="src-id">FROM</span> <span class="src-var">$tablename</span></span><span class="src-str">&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a247"></a>&nbsp;</li>
<li><a name="a248"></a>        <span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">@</span><span class="src-id">mysql_num_rows</span><span class="src-sym">(</span><span class="src-var">$result</span><span class="src-sym">)</span>&gt;<span class="src-num">0</span><span class="src-sym">)</span></li>
<li><a name="a249"></a>        <span class="src-sym">{</span></li>
<li><a name="a250"></a>            <span class="src-var">$content </span>.=<span class="src-str">&quot;#------------------------------------------&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">newline</span><span class="src-sym">;</span></li>
<li><a name="a251"></a>            <span class="src-var">$content </span>.=<span class="src-str">&quot;</span><span class="src-str"># <span class="src-id">Data</span> <span class="src-id">inserts</span> <span class="src-id">for</span> <span class="src-var">$tablename</span></span><span class="src-str">&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">newline</span><span class="src-sym">;</span></li>
<li><a name="a252"></a>            <span class="src-var">$content </span>.=<span class="src-str">&quot;#------------------------------------------&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">newline</span><span class="src-sym">;</span></li>
<li><a name="a253"></a>        <span class="src-sym">}</span></li>
<li><a name="a254"></a>&nbsp;</li>
<li><a name="a255"></a>        <span class="src-key">while</span><span class="src-sym">(</span><span class="src-var">$row </span>= <span class="src-sym">@</span><span class="src-id">mysql_fetch_row</span><span class="src-sym">(</span><span class="src-var">$result</span><span class="src-sym">))</span></li>
<li><a name="a256"></a>        <span class="src-sym">{</span></li>
<li><a name="a257"></a>          <span class="src-var">$insert </span>= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">INSERT</span> <span class="src-id">INTO</span> <span class="src-var">$tablename</span> <span class="src-id">VALUES</span> (</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a258"></a>&nbsp;</li>
<li><a name="a259"></a>          <span class="src-key">for</span><span class="src-sym">(</span><span class="src-var">$j</span>=<span class="src-num">0</span><span class="src-sym">; </span><span class="src-var">$j</span>&lt;<span class="src-sym">@</span><span class="src-id">mysql_num_fields</span><span class="src-sym">(</span><span class="src-var">$result</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-var">$j</span>++<span class="src-sym">)</span></li>
<li><a name="a260"></a>          <span class="src-sym">{</span></li>
<li><a name="a261"></a>            <span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$row</span><span class="src-sym">[</span><span class="src-var">$j</span><span class="src-sym">]</span><span class="src-sym">)) </span><span class="src-var">$insert </span>.= <span class="src-str">&quot;NULL,&quot;</span><span class="src-sym">;</span></li>
<li><a name="a262"></a>            <span class="src-key">else </span><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$row</span><span class="src-sym">[</span><span class="src-var">$j</span><span class="src-sym">] </span>!= <span class="src-str">&quot;&quot;</span><span class="src-sym">) </span><span class="src-var">$insert </span>.= <span class="src-str">&quot;'&quot;</span>.<a href="http://www.php.net/addslashes">addslashes</a><span class="src-sym">(</span><span class="src-var">$row</span><span class="src-sym">[</span><span class="src-var">$j</span><span class="src-sym">]</span><span class="src-sym">)</span>.<span class="src-str">&quot;',&quot;</span><span class="src-sym">;</span></li>
<li><a name="a263"></a>            <span class="src-key">else </span><span class="src-var">$insert </span>.= <span class="src-str">&quot;'',&quot;</span><span class="src-sym">;</span></li>
<li><a name="a264"></a>          <span class="src-sym">}</span></li>
<li><a name="a265"></a>&nbsp;</li>
<li><a name="a266"></a>          <span class="src-var">$insert </span>= <a href="http://www.php.net/ereg_replace">ereg_replace</a><span class="src-sym">(</span><span class="src-str">&quot;</span><span class="src-str">,$</span><span class="src-str">&quot;</span><span class="src-sym">, </span><span class="src-str">&quot;&quot;</span><span class="src-sym">, </span><span class="src-var">$insert</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a267"></a>          <span class="src-var">$insert </span>.= <span class="src-str">&quot;</span><span class="src-str">);<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">newline</span><span class="src-str">"</span></span><span class="src-sym">;</span></li>
<li><a name="a268"></a>          <span class="src-var">$content </span>.= <span class="src-var">$insert</span><span class="src-sym">;</span></li>
<li><a name="a269"></a>        <span class="src-sym">}</span></li>
<li><a name="a270"></a>&nbsp;</li>
<li><a name="a271"></a>        <span class="src-key">return </span><span class="src-var">$content</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">newline</span><span class="src-sym">;</span></li>
<li><a name="a272"></a>    <span class="src-sym">}</span></li>
<li><a name="a273"></a>&nbsp;</li>
<li><a name="a274"></a><span class="src-doc">/**</span></li>
<li><a name="a275"></a><span class="src-doc">* Define EOL character according to target OS</span></li>
<li><a name="a276"></a><span class="src-doc">* </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">String </span><span class="src-doc">a string containing the newline sequence used by the client (browser)</span></li>
<li><a name="a277"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> private</span></li>
<li><a name="a278"></a><span class="src-doc">*/</span></li>
<li><a name="a279"></a>    <span class="src-key">function </span><span class="src-id">_define_newline</span><span class="src-sym">(</span><span class="src-sym">)</span></li>
<li><a name="a280"></a>    <span class="src-sym">{</span></li>
<li><a name="a281"></a>         <span class="src-var">$unewline </span>= <span class="src-str">&quot;\r\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a282"></a>&nbsp;</li>
<li><a name="a283"></a>         <span class="src-key">if </span><span class="src-sym">(</span><a href="http://www.php.net/strstr">strstr</a><span class="src-sym">(</span><a href="http://www.php.net/strtolower">strtolower</a><span class="src-sym">(</span><span class="src-var">$_SERVER</span><span class="src-sym">[</span><span class="src-str">&quot;HTTP_USER_AGENT&quot;</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">, </span><span class="src-str">'win'</span><span class="src-sym">))</span></li>
<li><a name="a284"></a>         <span class="src-sym">{</span></li>
<li><a name="a285"></a>            <span class="src-var">$unewline </span>= <span class="src-str">&quot;\r\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a286"></a>         <span class="src-sym">}</span></li>
<li><a name="a287"></a>         <span class="src-key">else </span><span class="src-key">if </span><span class="src-sym">(</span><a href="http://www.php.net/strstr">strstr</a><span class="src-sym">(</span><a href="http://www.php.net/strtolower">strtolower</a><span class="src-sym">(</span><span class="src-var">$_SERVER</span><span class="src-sym">[</span><span class="src-str">&quot;HTTP_USER_AGENT&quot;</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">, </span><span class="src-str">'mac'</span><span class="src-sym">))</span></li>
<li><a name="a288"></a>         <span class="src-sym">{</span></li>
<li><a name="a289"></a>            <span class="src-var">$unewline </span>= <span class="src-str">&quot;\r&quot;</span><span class="src-sym">;</span></li>
<li><a name="a290"></a>         <span class="src-sym">}</span></li>
<li><a name="a291"></a>         <span class="src-key">else</span></li>
<li><a name="a292"></a>         <span class="src-sym">{</span></li>
<li><a name="a293"></a>            <span class="src-var">$unewline </span>= <span class="src-str">&quot;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a294"></a>         <span class="src-sym">}</span></li>
<li><a name="a295"></a>&nbsp;</li>
<li><a name="a296"></a>         <span class="src-key">return </span><span class="src-var">$unewline</span><span class="src-sym">;</span></li>
<li><a name="a297"></a>    <span class="src-sym">}</span></li>
<li><a name="a298"></a>&nbsp;</li>
<li><a name="a299"></a><span class="src-doc">/**</span></li>
<li><a name="a300"></a><span class="src-doc">* Define the client's browser type</span></li>
<li><a name="a301"></a><span class="src-doc">* </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">String </span><span class="src-doc">a String containing the browser type (IE, OPERA, MOZILA, etc.)</span></li>
<li><a name="a302"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> private</span></li>
<li><a name="a303"></a><span class="src-doc">*/</span></li>
<li><a name="a304"></a>    <span class="src-key">function </span><span class="src-id">_get_browser_type</span><span class="src-sym">(</span><span class="src-sym">)</span></li>
<li><a name="a305"></a>    <span class="src-sym">{</span></li>
<li><a name="a306"></a>        <span class="src-var">$USER_BROWSER_AGENT</span>=<span class="src-str">&quot;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a307"></a>&nbsp;</li>
<li><a name="a308"></a>        <span class="src-key">if </span><span class="src-sym">(</span><a href="http://www.php.net/ereg">ereg</a><span class="src-sym">(</span><span class="src-str">'OPERA(/| )([0-9].[0-9]{1,2})'</span><span class="src-sym">, </span><a href="http://www.php.net/strtoupper">strtoupper</a><span class="src-sym">(</span><span class="src-var">$_SERVER</span><span class="src-sym">[</span><span class="src-str">&quot;HTTP_USER_AGENT&quot;</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">, </span><span class="src-var">$log_version</span><span class="src-sym">))</span></li>
<li><a name="a309"></a>        <span class="src-sym">{</span></li>
<li><a name="a310"></a>            <span class="src-var">$USER_BROWSER_AGENT</span>=<span class="src-str">'OPERA'</span><span class="src-sym">;</span></li>
<li><a name="a311"></a>        <span class="src-sym">}</span></li>
<li><a name="a312"></a>        <span class="src-key">else </span><span class="src-key">if </span><span class="src-sym">(</span><a href="http://www.php.net/ereg">ereg</a><span class="src-sym">(</span><span class="src-str">'MSIE ([0-9].[0-9]{1,2})'</span><span class="src-sym">,</span><a href="http://www.php.net/strtoupper">strtoupper</a><span class="src-sym">(</span><span class="src-var">$_SERVER</span><span class="src-sym">[</span><span class="src-str">&quot;HTTP_USER_AGENT&quot;</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">, </span><span class="src-var">$log_version</span><span class="src-sym">))</span></li>
<li><a name="a313"></a>        <span class="src-sym">{</span></li>
<li><a name="a314"></a>            <span class="src-var">$USER_BROWSER_AGENT</span>=<span class="src-str">'IE'</span><span class="src-sym">;</span></li>
<li><a name="a315"></a>        <span class="src-sym">}</span></li>
<li><a name="a316"></a>        <span class="src-key">else </span><span class="src-key">if </span><span class="src-sym">(</span><a href="http://www.php.net/ereg">ereg</a><span class="src-sym">(</span><span class="src-str">'OMNIWEB/([0-9].[0-9]{1,2})'</span><span class="src-sym">, </span><a href="http://www.php.net/strtoupper">strtoupper</a><span class="src-sym">(</span><span class="src-var">$_SERVER</span><span class="src-sym">[</span><span class="src-str">&quot;HTTP_USER_AGENT&quot;</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">, </span><span class="src-var">$log_version</span><span class="src-sym">))</span></li>
<li><a name="a317"></a>        <span class="src-sym">{</span></li>
<li><a name="a318"></a>            <span class="src-var">$USER_BROWSER_AGENT</span>=<span class="src-str">'OMNIWEB'</span><span class="src-sym">;</span></li>
<li><a name="a319"></a>        <span class="src-sym">}</span></li>
<li><a name="a320"></a>        <span class="src-key">else </span><span class="src-key">if </span><span class="src-sym">(</span><a href="http://www.php.net/ereg">ereg</a><span class="src-sym">(</span><span class="src-str">'MOZILLA/([0-9].[0-9]{1,2})'</span><span class="src-sym">, </span><a href="http://www.php.net/strtoupper">strtoupper</a><span class="src-sym">(</span><span class="src-var">$_SERVER</span><span class="src-sym">[</span><span class="src-str">&quot;HTTP_USER_AGENT&quot;</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">, </span><span class="src-var">$log_version</span><span class="src-sym">))</span></li>
<li><a name="a321"></a>        <span class="src-sym">{</span></li>
<li><a name="a322"></a>            <span class="src-var">$USER_BROWSER_AGENT</span>=<span class="src-str">'MOZILLA'</span><span class="src-sym">;</span></li>
<li><a name="a323"></a>        <span class="src-sym">}</span></li>
<li><a name="a324"></a>        <span class="src-key">else </span><span class="src-key">if </span><span class="src-sym">(</span><a href="http://www.php.net/ereg">ereg</a><span class="src-sym">(</span><span class="src-str">'KONQUEROR/([0-9].[0-9]{1,2})'</span><span class="src-sym">, </span><a href="http://www.php.net/strtoupper">strtoupper</a><span class="src-sym">(</span><span class="src-var">$_SERVER</span><span class="src-sym">[</span><span class="src-str">&quot;HTTP_USER_AGENT&quot;</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">, </span><span class="src-var">$log_version</span><span class="src-sym">))</span></li>
<li><a name="a325"></a>        <span class="src-sym">{</span></li>
<li><a name="a326"></a>            <span class="src-var">$USER_BROWSER_AGENT</span>=<span class="src-str">'KONQUEROR'</span><span class="src-sym">;</span></li>
<li><a name="a327"></a>        <span class="src-sym">}</span></li>
<li><a name="a328"></a>        <span class="src-key">else</span></li>
<li><a name="a329"></a>        <span class="src-sym">{</span></li>
<li><a name="a330"></a>            <span class="src-var">$USER_BROWSER_AGENT</span>=<span class="src-str">'OTHER'</span><span class="src-sym">;</span></li>
<li><a name="a331"></a>        <span class="src-sym">}</span></li>
<li><a name="a332"></a>&nbsp;</li>
<li><a name="a333"></a>        <span class="src-key">return </span><span class="src-var">$USER_BROWSER_AGENT</span><span class="src-sym">;</span></li>
<li><a name="a334"></a>    <span class="src-sym">}</span></li>
<li><a name="a335"></a>&nbsp;</li>
<li><a name="a336"></a><span class="src-doc">/**</span></li>
<li><a name="a337"></a><span class="src-doc">* Define MIME-TYPE according to target Browser</span></li>
<li><a name="a338"></a><span class="src-doc">* </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">String </span><span class="src-doc">a string containing the MIME-TYPE header to send to the browser</span></li>
<li><a name="a339"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> private</span></li>
<li><a name="a340"></a><span class="src-doc">*/</span></li>
<li><a name="a341"></a>    <span class="src-key">function </span><span class="src-id">_get_mime_type</span><span class="src-sym">(</span><span class="src-sym">)</span></li>
<li><a name="a342"></a>    <span class="src-sym">{</span></li>
<li><a name="a343"></a>        <span class="src-var">$USER_BROWSER_AGENT</span>= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-id">_get_browser_type</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a344"></a>&nbsp;</li>
<li><a name="a345"></a>        <span class="src-var">$mime_type </span>= <span class="src-sym">(</span><span class="src-var">$USER_BROWSER_AGENT </span>== <span class="src-str">'IE' </span>|| <span class="src-var">$USER_BROWSER_AGENT </span>== <span class="src-str">'OPERA'</span><span class="src-sym">)</span></li>
<li><a name="a346"></a>                       ? <span class="src-str">'application/octetstream'</span></li>
<li><a name="a347"></a>                       : <span class="src-str">'application/octet-stream'</span><span class="src-sym">;</span></li>
<li><a name="a348"></a>        <span class="src-key">return </span><span class="src-var">$mime_type</span><span class="src-sym">;</span></li>
<li><a name="a349"></a>    <span class="src-sym">}</span></li>
<li><a name="a350"></a>&nbsp;</li>
<li><a name="a351"></a><span class="src-doc">/**</span></li>
<li><a name="a352"></a><span class="src-doc">* Generate the DB backup and send it to browser or download it as a file</span></li>
<li><a name="a353"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> public</span></li>
<li><a name="a354"></a><span class="src-doc">*/</span></li>
<li><a name="a355"></a>    <span class="src-key">function </span><a href="../iam_backup.php/iam_backup.html#methodperform_backup">perform_backup</a><span class="src-sym">(</span><span class="src-sym">)</span></li>
<li><a name="a356"></a>    <span class="src-sym">{</span></li>
<li><a name="a357"></a>&nbsp;</li>
<li><a name="a358"></a>        <span class="src-var">$now </span>= <a href="http://www.php.net/gmdate">gmdate</a><span class="src-sym">(</span><span class="src-str">'D, d M Y H:i:s'</span><span class="src-sym">) </span>. <span class="src-str">' GMT'</span><span class="src-sym">;</span></li>
<li><a name="a359"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">compress</span><span class="src-sym">)</span></li>
<li><a name="a360"></a>        <span class="src-sym">{</span></li>
<li><a name="a361"></a>            <span class="src-var">$filename </span>= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">dbname</span>.<span class="src-str">&quot;.sql&quot;</span><span class="src-sym">;</span></li>
<li><a name="a362"></a>            <span class="src-var">$ext </span>= <span class="src-str">&quot;gz&quot;</span><span class="src-sym">;</span></li>
<li><a name="a363"></a>        <span class="src-sym">}</span></li>
<li><a name="a364"></a>        <span class="src-key">else</span></li>
<li><a name="a365"></a>        <span class="src-sym">{</span></li>
<li><a name="a366"></a>            <span class="src-var">$filename </span>= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">dbname</span><span class="src-sym">;</span></li>
<li><a name="a367"></a>            <span class="src-var">$ext </span>= <span class="src-str">&quot;sql&quot;</span><span class="src-sym">;</span></li>
<li><a name="a368"></a>        <span class="src-sym">}</span></li>
<li><a name="a369"></a>&nbsp;</li>
<li><a name="a370"></a>        <span class="src-var">$USER_BROWSER_AGENT</span>= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-id">_get_browser_type</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a371"></a>&nbsp;</li>
<li><a name="a372"></a>        <span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">filename</span><span class="src-sym">)</span></li>
<li><a name="a373"></a>        <span class="src-sym">{</span></li>
<li><a name="a374"></a>            <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-id">_backup</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a375"></a>        <span class="src-sym">}</span></li>
<li><a name="a376"></a>        <span class="src-key">else</span></li>
<li><a name="a377"></a>            <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">output </span>== <span class="src-id">true</span><span class="src-sym">)</span></li>
<li><a name="a378"></a>            <span class="src-sym">{</span></li>
<li><a name="a379"></a>                 <a href="http://www.php.net/header">header</a><span class="src-sym">(</span><span class="src-str">'Content-Type: ' </span>. <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-id">_get_mime_type</span><span class="src-sym">(</span><span class="src-sym">))</span><span class="src-sym">;</span></li>
<li><a name="a380"></a>                 <a href="http://www.php.net/header">header</a><span class="src-sym">(</span><span class="src-str">'Expires: ' </span>. <span class="src-var">$now</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a381"></a>                 <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$USER_BROWSER_AGENT </span>== <span class="src-str">'IE'</span><span class="src-sym">)</span></li>
<li><a name="a382"></a>                 <span class="src-sym">{</span></li>
<li><a name="a383"></a>                      <a href="http://www.php.net/header">header</a><span class="src-sym">(</span><span class="src-str">'Content-Disposition: inline; filename=&quot;' </span>. <span class="src-var">$filename </span>. <span class="src-str">'.' </span>. <span class="src-var">$ext </span>. <span class="src-str">'&quot;'</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a384"></a>                      <a href="http://www.php.net/header">header</a><span class="src-sym">(</span><span class="src-str">'Cache-Control: must-revalidate, post-check=0, pre-check=0'</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a385"></a>                      <a href="http://www.php.net/header">header</a><span class="src-sym">(</span><span class="src-str">'Pragma: public'</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a386"></a>                 <span class="src-sym">}</span></li>
<li><a name="a387"></a>                 <span class="src-key">else</span></li>
<li><a name="a388"></a>                 <span class="src-sym">{</span></li>
<li><a name="a389"></a>                      <a href="http://www.php.net/header">header</a><span class="src-sym">(</span><span class="src-str">'Content-Disposition: attachment; filename=&quot;' </span>. <span class="src-var">$filename </span>. <span class="src-str">'.' </span>. <span class="src-var">$ext </span>. <span class="src-str">'&quot;'</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a390"></a>                      <a href="http://www.php.net/header">header</a><span class="src-sym">(</span><span class="src-str">'Pragma: no-cache'</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a391"></a>                 <span class="src-sym">}</span></li>
<li><a name="a392"></a>&nbsp;</li>
<li><a name="a393"></a>                 <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-id">_backup</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a394"></a>            <span class="src-sym">}</span></li>
<li><a name="a395"></a>            <span class="src-key">else</span></li>
<li><a name="a396"></a>            <span class="src-sym">{</span></li>
<li><a name="a397"></a>                 echo <span class="src-str">&quot;&lt;html&gt;&lt;body&gt;&lt;pre&gt;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a398"></a>                 echo <a href="http://www.php.net/htmlspecialchars">htmlspecialchars</a><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-id">_backup</span><span class="src-sym">(</span><span class="src-sym">))</span><span class="src-sym">;</span></li>
<li><a name="a399"></a>                 echo <span class="src-str">&quot;&lt;/PRE&gt;&lt;/BODY&gt;&lt;/HTML&gt;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a400"></a>            <span class="src-sym">}</span></li>
<li><a name="a401"></a>    <span class="src-sym">}</span></li>
<li><a name="a402"></a><span class="src-sym">}</span></li>
<li><a name="a403"></a>&nbsp;</li>
<li><a name="a404"></a><span class="src-php">?&gt;</span></li>
</ol></pre>
</div>
	<p class="notes" id="credit">
		Documentation generated on Mon, 19 Jul 2010 20:34:14 -0500 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.3.0RC3</a>
	</p>
	</body>
</html>