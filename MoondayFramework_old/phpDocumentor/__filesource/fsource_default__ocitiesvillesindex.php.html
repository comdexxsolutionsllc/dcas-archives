<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos -->
			<title>File Source for index.php</title>
			<link rel="stylesheet" href="../media/stylesheet.css" />
			<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'/>
		</head>
		<body>
						<h1>Source for file index.php</h1>
<p>Documentation is available at <a href="../default/_ocities_villes_index_php.html">index.php</a></p>
<div class="src-code">
<pre><ol><li><a name="a1"></a><span class="src-php">&lt;?php</span></li>
<li><a name="a2"></a><a href="http://www.php.net/ob_start">ob_start</a> <span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a3"></a><span class="src-php">?&gt;</span></li>
<li><a name="a4"></a><span class="src-php">&lt;?</span><span class="src-id">phpxml version</span>=<span class="src-str">&quot;1.0&quot; </span><span class="src-id">encoding</span>=<span class="src-str">&quot;UTF-8&quot;</span><span class="src-php">?&gt;</span></li>
<li><a name="a5"></a>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;</li>
<li><a name="a6"></a>&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;fr&quot; lang=&quot;fr&quot;&gt;</li>
<li><a name="a7"></a>    &lt;head&gt;</li>
<li><a name="a8"></a>    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;css/maindoc.css&quot; /&gt;</li>
<li><a name="a9"></a>    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;</li>
<li><a name="a10"></a><span class="src-php">&lt;?php</span></li>
<li><a name="a11"></a><span class="src-doc">/**</span></li>
<li><a name="a12"></a><span class="src-doc">*includes pour php5</span></li>
<li><a name="a13"></a><span class="src-doc">*</span></li>
<li><a name="a14"></a><span class="src-doc">*/</span></li>
<li><a name="a15"></a>&nbsp;</li>
<li><a name="a16"></a><span class="src-inc">require_once </span><span class="src-str">'php5/ocity.cls.php'</span><span class="src-sym">;</span></li>
<li><a name="a17"></a><span class="src-inc">require_once </span><span class="src-str">'php5/oajax.cls.php'</span><span class="src-sym">;</span></li>
<li><a name="a18"></a><span class="src-inc">require_once </span><span class="src-str">'php5/soundex2.cls.php'</span><span class="src-sym">;</span></li>
<li><a name="a19"></a><span class="src-inc">require_once </span><span class="src-str">'php5/phonex.cls.php'</span><span class="src-sym">;</span></li>
<li><a name="a20"></a>&nbsp;</li>
<li><a name="a21"></a>&nbsp;</li>
<li><a name="a22"></a><span class="src-doc">/**</span></li>
<li><a name="a23"></a><span class="src-doc">*includes pour php4</span></li>
<li><a name="a24"></a><span class="src-doc">*</span></li>
<li><a name="a25"></a><span class="src-doc">*/</span></li>
<li><a name="a26"></a><span class="src-comm">/*</span></li>
<li><a name="a27"></a><span class="src-comm">require_once 'php4/ocity.cls.php';</span></li>
<li><a name="a28"></a><span class="src-comm">require_once 'php4/oajax.cls.php';</span></li>
<li><a name="a29"></a><span class="src-comm">require_once 'php4/soundex2.cls.php';</span></li>
<li><a name="a30"></a><span class="src-comm">require_once 'php4/phonex.cls.php';</span></li>
<li><a name="a31"></a><span class="src-comm">*/</span></li>
<li><a name="a32"></a>&nbsp;</li>
<li><a name="a33"></a><span class="src-var">$soundex </span>= <span class="src-key">new </span><span class="src-id"><a href="../default/soundex2.html">soundex2</a></span><span class="src-sym">;</span></li>
<li><a name="a34"></a><span class="src-var">$phonex </span>= <span class="src-key">new </span><span class="src-id"><a href="../default/phonex.html">phonex</a></span><span class="src-sym">;</span></li>
<li><a name="a35"></a><span class="src-var">$ville </span>= <span class="src-key">new </span><span class="src-id"><a href="../default/ocity.html">ocity</a> </span><span class="src-sym">(</span><span class="src-str">'data.dat'</span><span class="src-sym">, </span><span class="src-var">$soundex</span><span class="src-sym">, </span><span class="src-var">$phonex</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a36"></a><span class="src-var">$ajax </span>= <span class="src-key">new </span><span class="src-id"><a href="../default/oajax.html">oajax</a></span><span class="src-sym">;</span></li>
<li><a name="a37"></a>&nbsp;</li>
<li><a name="a38"></a>echo <span class="src-var">$ajax </span><span class="src-sym">-&gt; </span><span class="src-id">setHeader </span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a39"></a>echo <span class="src-var">$ajax </span><span class="src-sym">-&gt; </span><span class="src-id">buildAjax </span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a40"></a>echo <span class="src-var">$ajax </span><span class="src-sym">-&gt; </span><span class="src-id">search </span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a41"></a>echo <span class="src-var">$ajax </span><span class="src-sym">-&gt; </span><span class="src-id">setFooter </span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a42"></a>&nbsp;</li>
<li><a name="a43"></a><span class="src-var">$sBuffer </span>= <a href="http://www.php.net/ob_get_clean">ob_get_clean</a> <span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a44"></a><span class="src-var">$bCheck </span>= <span class="src-var">$ville </span><span class="src-sym">-&gt; </span><span class="src-id">getSearch </span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a45"></a><a href="http://www.php.net/ob_start">ob_start</a> <span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a46"></a><span class="src-php">?&gt;</span></li>
<li><a name="a47"></a>&lt;/head&gt;</li>
<li><a name="a48"></a>    &lt;body&gt;</li>
<li><a name="a49"></a>&lt;input type=&quot;text&quot; name=&quot;mySearch&quot; id=&quot;mySearch&quot; /&gt;</li>
<li><a name="a50"></a>&lt;input type=&quot;button&quot; value=&quot;Search&quot; title=&quot;Letters or numbers&quot; onclick=&quot;search (''+document.getElementById('mySearch').value+'', 0, 0);&quot; style=&quot;cursor:pointer;&quot;/&gt;</li>
<li><a name="a51"></a>&lt;input type=&quot;button&quot; value=&quot;Soundex&quot; title=&quot;Only letters !&quot; onclick=&quot;search (''+document.getElementById('mySearch').value+'', 0, 1);&quot; style=&quot;cursor:pointer;&quot;/&gt;</li>
<li><a name="a52"></a>&lt;input type=&quot;button&quot; value=&quot;Phonex&quot; title=&quot;Only letters !&quot; onclick=&quot;search (''+document.getElementById('mySearch').value+'', 0, 2);&quot; style=&quot;cursor:pointer;&quot;/&gt;</li>
<li><a name="a53"></a>&nbsp;</li>
<li><a name="a54"></a>&lt;div id=&quot;divContent&quot;&gt;</li>
<li><a name="a55"></a>&lt;/div&gt;</li>
<li><a name="a56"></a>&nbsp;</li>
<li><a name="a57"></a>&lt;/body&gt;</li>
<li><a name="a58"></a>&lt;/html&gt;</li>
<li><a name="a59"></a><span class="src-php">&lt;?php</span></li>
<li><a name="a60"></a><span class="src-var">$sBuffer </span>.= <a href="http://www.php.net/ob_get_clean">ob_get_clean</a> <span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a61"></a><span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$bCheck </span>=== <span class="src-id">false</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a62"></a>    echo <span class="src-var">$sBuffer</span><span class="src-sym">;</span></li>
<li><a name="a63"></a><span class="src-sym">}</span></li>
<li><a name="a64"></a><span class="src-doc">/**</span></li>
<li><a name="a65"></a><span class="src-doc">* data2.dat file creation, with soundex and phonex codes (already done)</span></li>
<li><a name="a66"></a><span class="src-doc">*</span></li>
<li><a name="a67"></a><span class="src-doc">$sVilles = file_get_contents ('data.dat');</span></li>
<li><a name="a68"></a><span class="src-doc">$aLines =explode (&quot;\r&quot;, $sVilles);</span></li>
<li><a name="a69"></a><span class="src-doc">echo '&lt;pre&gt;', print_r ($aLines), '&lt;/pre&gt;';</span></li>
<li><a name="a70"></a><span class="src-doc">foreach ($aLines as $clef =&gt; $line) {</span></li>
<li><a name="a71"></a><span class="src-doc">    $nom = strtolower (trim (substr ($line, 0, strlen ($line) - 6)));</span></li>
<li><a name="a72"></a><span class="src-doc">    if (!empty ($nom)) {</span></li>
<li><a name="a73"></a><span class="src-doc">        $aCpVilles[$clef] = trim (substr ($line, -6));</span></li>
<li><a name="a74"></a><span class="src-doc">        $aNomVilles[$clef] = $nom;</span></li>
<li><a name="a75"></a><span class="src-doc">        $soundex -&gt; build ($nom);</span></li>
<li><a name="a76"></a><span class="src-doc">        $phonex -&gt; build ($nom);</span></li>
<li><a name="a77"></a><span class="src-doc">        $aSoundexVilles[$clef] = $soundex -&gt; sString;</span></li>
<li><a name="a78"></a><span class="src-doc">        $aPhonexVilles[$clef] = $phonex -&gt; sString;</span></li>
<li><a name="a79"></a><span class="src-doc">    }</span></li>
<li><a name="a80"></a><span class="src-doc">}</span></li>
<li><a name="a81"></a><span class="src-doc">$fp = fopen ('data2.dat', 'w');</span></li>
<li><a name="a82"></a><span class="src-doc">foreach ($aCpVilles as $clef =&gt; $val) {</span></li>
<li><a name="a83"></a><span class="src-doc">    fwrite ($fp, $val.';'.$aNomVilles[$clef].';'.$aSoundexVilles[$clef].';'.$aPhonexVilles[$clef].&quot;\r\n&quot;);</span></li>
<li><a name="a84"></a><span class="src-doc">}</span></li>
<li><a name="a85"></a><span class="src-doc">fclose ($fp);</span></li>
<li><a name="a86"></a><span class="src-doc">*/</span></li>
<li><a name="a87"></a>&nbsp;</li>
<li><a name="a88"></a><span class="src-php">?&gt;</span></li>
</ol></pre>
</div>
	<p class="notes" id="credit">
		Documentation generated on Mon, 19 Jul 2010 20:34:18 -0500 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.3.0RC3</a>
	</p>
	</body>
</html>